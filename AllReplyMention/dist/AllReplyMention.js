function g(o){window.enmity.plugins.registerPlugin(o)}function l(...o){return window.enmity.modules.getByProps(...o)}window.enmity.modules.common;function y(o){return window.enmity.settings.makeStore(o)}function p(o){return window.enmity.patcher.create(o)}function S(o){return window.enmity.assets.getIDByName(o)}window.enmity.modules.common.Constants,window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const d=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const h=window.enmity.modules.common.Toasts;window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users,window.enmity.modules.common.Navigation,window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking,window.enmity.modules.common.StyleSheet,window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes;var f="AllReplyMention",T="1.0.0",E="Does a load of random crap.",F=[{name:"Alyxia",id:"952185386350829688"}],C={name:f,version:T,description:E,authors:F};function A(o,a){let t={id:"967590310844706906",type:0,content:"",channel_id:a.id,author:{id:"295468625240915968",username:"funlennysub",avatar:"5a6ff8383a961ba5a7a1ca9f6bfefc54",discriminator:"6727",publicFlags:640,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"2022-04-24T00:58:27.064000+00:00",edited_timestamp:null,flags:0,components:[]};return typeof o=="string"?t.content=o:t={...t,...o},t}const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl;const v=e.ScrollView;e.SectionList,e.StatusBar,e.StyleSheet,e.Switch,e.Text,e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable,e.View,e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const u=e.FormRow;e.FormSection,e.FormSelect,e.FormSubLabel,e.FormSwitch,e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;var _=({settings:o})=>d.createElement(v,null,d.createElement(u,{label:"Reset messageStore",trailing:u.Arrow,onPress:()=>o.set("messageStore",[])}));const r=l("_currentDispatchActionType","_subscriptions","_waitQueue"),c=p("allreplymention"),{getCurrentUser:b}=l("getCurrentUser"),R={...C,onStart(){const o=y(this.name);r.dispatch({type:"MESSAGE_CREATE",message:A("PLACEHOLDER",{id:"0"})});const a=r._orderedActionHandlers.MESSAGE_CREATE.find(i=>i.name==="MessageStore");c.before(a,"actionHandler",(i,m)=>{const s=b(),n=m[0].message;if(n.referenced_message){if(n.referenced_message.author.id!==s.id){console.log("Received message was not a reply to client user, skipping.");return}if(n.mentions.length!==0){console.log("Received message had a ping, skipping.");return}console.log("Received message was a reply to current user and had no ping, criteria satisfied!"),o.set("messageStore",[n,...o.get("messageStore",[])]),h.open({content:`${n.author.username} replied to you!`,source:S("ic_info")})}}),r.dispatch({type:"LOAD_RECENT_MENTIONS",guildId:null}),r.dispatch({type:"LOAD_RECENT_MENTIONS_SUCCESS",messages:[]});const t=r._orderedActionHandlers.LOAD_RECENT_MENTIONS_SUCCESS.find(i=>i.name==="RecentMentionsStore");c.before(t,"actionHandler",(i,m)=>{let s=m[0].messages;s=[...o.get("messageStore",[]),...s],m[0].messages=s,m[0].messages=m[0].messages.sort((n,w)=>new Date(w.timestamp)-new Date(n.timestamp))})},onStop(){c.unpatchAll()},getSettingsPanel({settings:o}){return d.createElement(_,{settings:o})}};g(R);
